<!DOCTYPE html>
<html>
  <head>
    <title>Data Visualization with ggplot2</title>
    <meta charset="utf-8">
    <meta name="author" content="Howard Baik" />
    <meta name="date" content="2019-06-05" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Visualization with ggplot2
## <a href="https://r4ds.had.co.nz/">R for Data Science</a>
### Howard Baik
### 2019-06-05

---




.pull-left[
&lt;img src="images/ggplot2.png" width = 350 height = 400&gt;
]

.pull-right[
&lt;img src="images/hadley.jpg" width = 350 height = 300&gt;
]

&lt;br&gt;

## [A Grammar of Graphics](https://vita.had.co.nz/papers/layered-grammar.pdf) by Hadley Wickham, RStudio

---

# Get Started

- [Link to Book](https://r4ds.had.co.nz/data-visualisation.html)

&lt;img src="images/book.png"&gt;

---

# Hello World

- Load tidyverse (ggplot2)


```r
install.packages("tidyverse")
library(tidyverse)
```



---
# mpg Data Frame

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; manufacturer &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; model &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; displ &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cyl &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; trans &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; drv &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cty &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; hwy &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; fl &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; class &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; auto(l5) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; manual(m5) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; manual(m6) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; auto(av) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; auto(l5) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; audi &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; manual(m5) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; p &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; compact &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;




---
# mpg Data Frame

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; displ &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; hwy &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- `displ`: a car's engine size, in liters.

- `hwy`: a car's efficiency in miles per gallon. A car with low `hwy` consumes more fuel than a car with high `hwy`

---
# Creating a ggplot


```r
ggplot(data = mpg)
```

- `ggplot()` creates a coordinate system you can add layers to. 


---

background-image: url("images/blank-canvas.jpg")
background-size: cover

---
# Creating a ggplot


```r
ggplot(data = mpg) +
  geom_point()
```

- `geom_point()` adds a layer to your plot: points for a scatterplot

---
# Creating a ggplot


```r
ggplot(data = mpg) +
  geom_point(mapping = aes(x = displ, y = hwy))
```

- `mapping` argument is always paired with `aes()` and defines how variables in your dataset are mapped to visual properties.

- x and y arguments specify which variables to map to x and y-axes.

---
# 3.2.4 Exercises: #1, #4

&lt;img src="images/problem-solving.png"&gt;

<div class="countdown" id="timer_5cf7c229" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# Aesthetics in Geoms

- An aesthetic is a visual property of the objects in your plot.

- For ex) Size, shape, or color of points

&lt;br&gt;

_The greatest value of a picture is when it forces us to notice what we never expected to see_ (John Tukey)

---
# Color Aesthetic in Geoms


![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---
# Alpha Aesthetic in Geoms

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;
---
# Shape Aesthetic in Geoms

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;
---
# Manual Aesthetics

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

- To set aesthetics manually, place it outside of `aes()`
---
# 3.3.1 Exercises: #1, #2, #6

&lt;img src="images/problem-solving.png"&gt;

<div class="countdown" id="timer_5cf7c343" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# Common Problems: Demo

&lt;img src="https://media.giphy.com/media/8L0Pky6C83SzkzU55a/giphy.gif", width=650 height=500&gt;

---
# Facets (Single Variable)

- To facet your plot by a single variable, use `facet_wrap()`


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_wrap(~ class, nrow = 2)
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

---
# Facets (Multiple Variables)

- The formula should contain two variable names separated by a `~`.


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_grid(drv ~ cyl)
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

---
# Facets

If you prefer to not facet in the rows or columns dimension, use a . instead of a variable name, e.g. + facet_grid(. ~ cyl).


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_grid(. ~ cyl)
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---
# 3.5.1 Exercises: #1, #2, #3

&lt;img src="images/problem-solving.png"&gt;

<div class="countdown" id="timer_5cf7c3f5" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# Geometric Objects

- A geom is the geometrical object that a plot uses to represent data.


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;

```r
ggplot(data = mpg) + 
  geom_smooth(mapping = aes(x = displ, y = hwy))
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-19-2.png)&lt;!-- --&gt;
---
# Cheatsheet

- The best way to get a comprehensive overview of the many available geoms is the [ggplot2 cheatsheet](http://rstudio.com/cheatsheets)

&lt;img src="images/cheatsheet.png" height = 400&gt;

---
# Multiple Geometric Objects

- To display multiple geoms in the same plot, add multiple geom functions to ggplot():


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  geom_smooth(mapping = aes(x = displ, y = hwy))
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

---
# Reduce Duplication


```r
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point() + 
  geom_smooth()
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;

---
# 3.6.1 Exercises: #1, #2, #3

&lt;img src="images/problem-solving.png"&gt;

<div class="countdown" id="timer_5cf7c216" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# 3.8 Position Adjustments

- Bars are automatically stacked


```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity))
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---
# `position = "identity"`

- The default condition

---
# `position = "fill"`

- Works like stacking, but makes each set of stacked bars the same height. 
- This makes it easier to compare proportions across groups.


```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "fill")
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;


---
# `position = "dodge"`

- Places overlapping objects directly beside one another. 
- This makes it easier to compare individual values.


```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "dodge")
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;

---
# `position = "jitter"`


```r
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy), position = "jitter")
```

![](chapter1-ggplot2-slides_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;

- ggplot2 comes with a shorthand for `geom_point(position = "jitter")`: `geom_jitter()`.

---
# 3.8.1 Exercises: #1, #2, #3

&lt;img src="images/problem-solving.png"&gt;

<div class="countdown" id="timer_5cf7c2a0" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


---
&lt;img src="https://media.giphy.com/media/26FPOogenQv5eOZHO/giphy.gif", width=650 height=500&gt;

## Contact: howardhowiebaik@gmail.com
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
